{"version":3,"sources":["webpack:///src/app/pages/account/organization/organization-routing.module.ts","webpack:///src/app/pages/account/organization/organization.component.ts","webpack:///src/app/pages/account/organization/organization.component.html","webpack:///src/app/pages/account/organization/organization.module.ts"],"names":["routes","path","component","OrganizationRoutingModule","forChild","imports","exports","OrganizationComponent","modal","listOfMapData","key","name","type","address","children","mapOfExpandedData","forEach","item","convertTreeToList","array","data","$event","d","target","find","a","expand","collapse","root","stack","hashMap","push","level","length","node","pop","visitNode","i","parent","confirm","nzTitle","nzContent","nzOkText","nzCancelText","nzOnOk","console","log","nzOnCancel","selector","templateUrl","styleUrls","OrganizationModule","declarations","providers"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAIA,QAAMA,MAAM,GAAW,CACrB;AAAEC,UAAI,EAAE,EAAR;AAAYC,eAAS,EAAE;AAAvB,KADqB,CAAvB;;QAQaC,yB;;;;;YAAAA;;;;yBAAAA,yB;AAAyB,O;AAAA,gBAH3B,CAAC,6DAAaC,QAAb,CAAsBJ,MAAtB,CAAD,CAG2B,EAF1B,4DAE0B;;;;0HAAzBG,yB,EAAyB;AAAA;AAAA,kBAF1B,4DAE0B;AAAA,O;AAFd,K;;;;;sEAEXA,yB,EAAyB;cAJrC,sDAIqC;eAJ5B;AACRE,iBAAO,EAAE,CAAC,6DAAaD,QAAb,CAAsBJ,MAAtB,CAAD,CADD;AAERM,iBAAO,EAAE,CAAC,4DAAD;AAFD,S;AAI4B,Q;;;;;;;;;;;;;;;;;;ACZtC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;ACgCU;;AACE;;AAAuE;AAAA;;AAAA;;AAAA;AAAA,WAA0B,gBAA1B,EAA0B;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA,SAA1B;;AAErE;;AACF;;AACA;;AAAI;;AAAe;;AACnB;;AAAI;;AAAkB;;AACtB;;AACE;;AAAgE;;AAAI;;AAAK;;AACzE;;AAAG;AAAA;;AAAA;;AAAA;AAAA;;AAAwB;;AAAE;;AAC/B;;AACF;;;;;;AAVM;;AAAA,qGAAiC,cAAjC,EAAiC,kBAAjC,EAAiC,UAAjC,EAAiC,cAAjC;;AAEF;;AAAA;;AAEE;;AAAA;;AACA;;AAAA;;AAEC;;AAAA;;;;;;AATT;;AACE;;AAYF;;;;;;AAZM;;AAAA;;;;;;AAFR;;AACE;;AAcF;;;;;;;;AAdgB;;AAAA;;;;;;;;QDZTC,qB;AAiDX,qCAAoBC,KAApB,EAA2C;AAAA;;AAAvB,aAAAA,KAAA,GAAAA,KAAA;AA7CpB,aAAAC,aAAA,GAAqC,CACnC;AACEC,aAAG,KADL;AAEEC,cAAI,EAAE,MAFR;AAGEC,cAAI,EAAE,GAHR;AAIEC,iBAAO,EAAE,UAJX;AAKEC,kBAAQ,EAAE,CACR;AACEJ,eAAG,OADL;AAEEC,gBAAI,EAAE,MAFR;AAGEC,gBAAI,EAAE,GAHR;AAIEC,mBAAO,EAAE,UAJX;AAKEC,oBAAQ,EAAE,CACR;AACEJ,iBAAG,SADL;AAEEC,kBAAI,EAAE,KAFR;AAGEC,kBAAI,EAAE,GAHR;AAIEC,qBAAO,EAAE;AAJX,aADQ;AALZ,WADQ,EAeR;AACEH,eAAG,OADL;AAEEC,gBAAI,EAAE,MAFR;AAGEC,gBAAI,EAAE,GAHR;AAIEC,mBAAO,EAAE;AAJX,WAfQ,EAqBR;AACEH,eAAG,OADL;AAEEC,gBAAI,EAAE,KAFR;AAGEC,gBAAI,EAAE,GAHR;AAIEC,mBAAO,EAAE;AAJX,WArBQ;AALZ,SADmC,EAmCnC;AACEH,aAAG,KADL;AAEEC,cAAI,EAAE,MAFR;AAGEC,cAAI,EAAE,GAHR;AAIEC,iBAAO,EAAE;AAJX,SAnCmC,CAArC;AA2CA,aAAAE,iBAAA,GAA4D,EAA5D;AAE8C;;;;mCAEtC;AAAA;;AACN,eAAKN,aAAL,CAAmBO,OAAnB,CAA2B,UAAAC,IAAI,EAAI;AACjC,iBAAI,CAACF,iBAAL,CAAuBE,IAAI,CAACP,GAA5B,IAAmC,KAAI,CAACQ,iBAAL,CAAuBD,IAAvB,CAAnC;AACD,WAFD;AAGD;;;iCAEQE,K,EAA4BC,I,EAAyBC,M,EAAe;AAAA;;AAC3E,cAAI,CAACA,MAAL,EAAa;AACX,gBAAID,IAAI,CAACN,QAAT,EAAmB;AACjBM,kBAAI,CAACN,QAAL,CAAcE,OAAd,CAAsB,UAAAM,CAAC,EAAI;AACzB,oBAAMC,MAAM,GAAGJ,KAAK,CAACK,IAAN,CAAW,UAAAC,CAAC;AAAA,yBAAIA,CAAC,CAACf,GAAF,KAAUY,CAAC,CAACZ,GAAhB;AAAA,iBAAZ,CAAf;AACAa,sBAAM,CAACG,MAAP,GAAgB,KAAhB;;AACA,sBAAI,CAACC,QAAL,CAAcR,KAAd,EAAqBI,MAArB,EAA6B,KAA7B;AACD,eAJD;AAKD,aAND,MAMO;AACL;AACD;AACF;AACF;;;0CAEiBK,I,EAAuB;AACvC,cAAMC,KAAK,GAAwB,EAAnC;AACA,cAAMV,KAAK,GAAwB,EAAnC;AACA,cAAMW,OAAO,GAAG,EAAhB;AACAD,eAAK,CAACE,IAAN,CAAW,MAAD,OAAC,CAAD,kBAAMH,IAAN,CAAC,EAAS;AAAEI,iBAAK,EAAE,CAAT;AAAYN,kBAAM,EAAE;AAApB,WAAT,CAAX;;AAEA,iBAAOG,KAAK,CAACI,MAAN,KAAiB,CAAxB,EAA2B;AACzB,gBAAMC,IAAI,GAAGL,KAAK,CAACM,GAAN,EAAb;AACA,iBAAKC,SAAL,CAAeF,IAAf,EAAqBJ,OAArB,EAA8BX,KAA9B;;AACA,gBAAIe,IAAI,CAACpB,QAAT,EAAmB;AACjB,mBAAK,IAAIuB,CAAC,GAAGH,IAAI,CAACpB,QAAL,CAAcmB,MAAd,GAAuB,CAApC,EAAuCI,CAAC,IAAI,CAA5C,EAA+CA,CAAC,EAAhD,EAAoD;AAClDR,qBAAK,CAACE,IAAN,CAAW,MAAD,OAAC,CAAD,kBAAMG,IAAI,CAACpB,QAAL,CAAcuB,CAAd,CAAN,CAAC,EAAqB;AAAEL,uBAAK,EAAEE,IAAI,CAACF,KAAL,GAAc,CAAvB;AAA0BN,wBAAM,EAAE,KAAlC;AAAyCY,wBAAM,EAAEJ;AAAjD,iBAArB,CAAX;AACD;AACF;AACF;;AAED,iBAAOf,KAAP;AACD;;;kCAESe,I,EAAyBJ,O,EAAqCX,K,EAA0B;AAChG,cAAI,CAACW,OAAO,CAACI,IAAI,CAACxB,GAAN,CAAZ,EAAwB;AACtBoB,mBAAO,CAACI,IAAI,CAACxB,GAAN,CAAP,GAAoB,IAApB;AACAS,iBAAK,CAACY,IAAN,CAAWG,IAAX;AACD;AACF,S,CAGD;;;;sCACW;AACT,eAAK1B,KAAL,CAAW+B,OAAX,CAAmB;AACjBC,mBAAO,EAAE,IADQ;AAEjBC,qBAAS,EAAE,wBAFM;AAGjBC,oBAAQ,EAAE,IAHO;AAIjBC,wBAAY,EAAE,IAJG;AAKjBC,kBAAM,EAAE;AAAA,qBAAMC,OAAO,CAACC,GAAR,CAAY,IAAZ,CAAN;AAAA,aALS;AAMjBC,sBAAU,EAAE;AAAA,qBAAMF,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAN;AAAA;AANK,WAAnB;AAQD;;;;;;;uBA5GUvC,qB,EAAqB,mI;AAAA,K;;;YAArBA,qB;AAAqB,uC;AAAA,e;AAAA,a;AAAA,6kB;AAAA;AAAA;AClBlC;;AAGA;;AAEE;;AACE;;AAAsC;AAAA;AAAA;;AAAtC;;AACA;;AAAyD;;AAAE;;AAC3D;;AAAmC;;AAAE;;AACvC;;AAEA;;AACE;;AAAI;;AAA6F;;AAAI;;AAAS;;AAChH;;AAEF;;AAGA;;AACE;;AACE;;AACE;;AACE;;AAAI;;AAAI;;AACR;;AAAI;;AAAI;;AACR;;AAAI;;AAAE;;AACN;;AAAI;;AAAE;;AACR;;AACF;;AACA;;AACE;;AAgBF;;AACF;;AACF;;;;;;AAzC0C;;AAAA;;AAMC;;AAAA;;AAOlB;;AAAA;;AAUL;;AAAA;;;;;;;;;sEDXPA,qB,EAAqB;cALjC,uDAKiC;eALvB;AACTyC,kBAAQ,EAAE,kBADD;AAETC,qBAAW,EAAE,+BAFJ;AAGTC,mBAAS,EAAE,CAAC,+BAAD;AAHF,S;AAKuB,Q;;;;;;;;;;;;;;;;;;;;;;AEnBlC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAmCaC,kB;;;;;YAAAA;;;;yBAAAA,kB;AAAkB,O;AAAA,iBAFlB,CAAC,mEAAD,C;AAAgB,gBAhBlB,CACP,4DADO,EAEP,sFAFO,EAGP,2FAHO,EAIP,mEAJO,EAKP,iEALO,EAMP,qEANO,EAOP,+DAPO,EAQP,+DARO,EASP,mEATO,EAUP,kEAVO,EAWP,2DAXO,EAYP,kEAZO,CAgBkB;;;;0HAEhBA,kB,EAAkB;AAAA,uBAJd,6EAIc;AAJO,kBAblC,4DAakC,EAZlC,sFAYkC,EAXlC,2FAWkC,EAVlC,mEAUkC,EATlC,iEASkC,EARlC,qEAQkC,EAPlC,+DAOkC,EANlC,+DAMkC,EALlC,mEAKkC,EAJlC,kEAIkC,EAHlC,2DAGkC,EAFlC,kEAEkC,CAIP;AANd,kBAGL,6EAHK;AAMc,O;AAHE,K;;;;;sEAGpBA,kB,EAAkB;cAnB9B,sDAmB8B;eAnBrB;AACR9C,iBAAO,EAAE,CACP,4DADO,EAEP,sFAFO,EAGP,2FAHO,EAIP,mEAJO,EAKP,iEALO,EAMP,qEANO,EAOP,+DAPO,EAQP,+DARO,EASP,mEATO,EAUP,kEAVO,EAWP,2DAXO,EAYP,kEAZO,CADD;AAeR+C,sBAAY,EAAE,CAAC,6EAAD,CAfN;AAgBR9C,iBAAO,EAAE,CAAC,6EAAD,CAhBD;AAiBR+C,mBAAS,EAAE,CAAC,mEAAD;AAjBH,S;AAmBqB,Q","file":"pages-account-organization-organization-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { OrganizationComponent } from './organization.component';\n\nconst routes: Routes = [\n  { path: '', component: OrganizationComponent },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class OrganizationRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { NzModalService } from 'ng-zorro-antd/modal';\n\nexport interface TreeNodeInterface {\n  key: string;\n  name: string;\n  type?: string;\n  level?: number;\n  expand?: boolean;\n  address?: string;\n  children?: TreeNodeInterface[];\n  parent?: TreeNodeInterface;\n}\n\n@Component({\n  selector: 'app-organization',\n  templateUrl: './organization.component.html',\n  styleUrls: ['./organization.component.scss']\n})\nexport class OrganizationComponent implements OnInit {\n\n  value?: string;\n\n  listOfMapData: TreeNodeInterface[] = [\n    {\n      key: `1`,\n      name: '广州军区',\n      type: '军',\n      address: '广州番禺南澳花园',\n      children: [\n        {\n          key: `1-1`,\n          name: '黄埔军校',\n          type: '师',\n          address: '广州番禺南澳花园',\n          children: [\n            {\n              key: `1-1-1`,\n              name: '特战旅',\n              type: '旅',\n              address: '广州番禺南澳花园'\n            }\n          ]\n        },\n        {\n          key: `1-2`,\n          name: '海军战队',\n          type: '团',\n          address: '广州番禺南澳花园',\n        },\n        {\n          key: `1-3`,\n          name: '炮兵连',\n          type: '营',\n          address: '广州番禺南澳花园'\n        }\n      ]\n    },\n    {\n      key: `2`,\n      name: '北京军区',\n      type: '军',\n      address: '广州番禺南澳花园'\n    }\n  ];\n\n  mapOfExpandedData: { [key: string]: TreeNodeInterface[] } = {};\n\n  constructor(private modal: NzModalService) { }\n  \n  ngOnInit(): void {\n    this.listOfMapData.forEach(item => {\n      this.mapOfExpandedData[item.key] = this.convertTreeToList(item);\n    });\n  }\n\n  collapse(array: TreeNodeInterface[], data: TreeNodeInterface, $event: boolean): void {\n    if (!$event) {\n      if (data.children) {\n        data.children.forEach(d => {\n          const target = array.find(a => a.key === d.key)!;\n          target.expand = false;\n          this.collapse(array, target, false);\n        });\n      } else {\n        return;\n      }\n    }\n  }\n\n  convertTreeToList(root: TreeNodeInterface): TreeNodeInterface[] {\n    const stack: TreeNodeInterface[] = [];\n    const array: TreeNodeInterface[] = [];\n    const hashMap = {};\n    stack.push({ ...root, level: 0, expand: false });\n\n    while (stack.length !== 0) {\n      const node = stack.pop()!;\n      this.visitNode(node, hashMap, array);\n      if (node.children) {\n        for (let i = node.children.length - 1; i >= 0; i--) {\n          stack.push({ ...node.children[i], level: node.level! + 1, expand: false, parent: node });\n        }\n      }\n    }\n\n    return array;\n  }\n\n  visitNode(node: TreeNodeInterface, hashMap: { [key: string]: boolean }, array: TreeNodeInterface[]): void {\n    if (!hashMap[node.key]) {\n      hashMap[node.key] = true;\n      array.push(node);\n    }\n  }\n\n\n  // modal\n  showConfirm(): void {\n    this.modal.confirm({\n      nzTitle: '提示',\n      nzContent: '你正在删除机构，删除后不可恢复，确定要删除?',\n      nzOkText: '删除',\n      nzCancelText: '取消',\n      nzOnOk: () => console.log('OK'),\n      nzOnCancel: () => console.log('Cancel')\n    });\n  }\n\n}\n","<!--页头部-->\n<app-page-header></app-page-header>\n\n<!-- 搜索 + 添加 -->\n<div class=\"or-header\">\n\n  <div class=\"organization-search\">\n    <input nz-input placeholder=\"请输入机构名称\" [(ngModel)]=\"value\" class=\"search-ipt\" />\n    <button nz-button nzType=\"primary\" class=\"or-search-btn\">查询</button>\n    <button nz-button nzType=\"default\">重置</button>\n  </div>\n\n  <div class=\"add-button\">\n    <a> <button nz-button nzType=\"primary\" [routerLink]=\"['/admin/organization/infoUpdate/', 'add']\">手动添加</button></a>\n  </div>\n\n</div>\n\n<!-- 表格 -->\n<div style=\"padding: 0 24px;\">\n  <nz-table #expandTable [nzData]=\"listOfMapData\" nzTableLayout=\"fixed\">\n    <thead>\n      <tr>\n        <th>机构名称</th>\n        <th>机构类型</th>\n        <th>地址</th>\n        <th>操作</th>\n      </tr>\n    </thead>\n    <tbody>\n      <ng-container *ngFor=\"let data of expandTable.data\">\n        <ng-container *ngFor=\"let item of mapOfExpandedData[data.key]\">\n          <tr *ngIf=\"(item.parent && item.parent.expand) || !item.parent\">\n            <td [nzIndentSize]=\"item.level! * 20\" [nzShowExpand]=\"!!item.children\" [(nzExpand)]=\"item.expand\"\n              (nzExpandChange)=\"collapse(mapOfExpandedData[data.key], item, $event)\">\n              {{ item.name }}\n            </td>\n            <td>{{ item.type }}</td>\n            <td>{{ item.address }}</td>\n            <td>\n              <a [routerLink]=\"['/admin/organization/infoUpdate/', 'update']\">单位信息</a> &nbsp;&nbsp;\n              <a (click)=\"showConfirm()\">删除</a>\n            </td>\n          </tr>\n        </ng-container>\n      </ng-container>\n    </tbody>\n  </nz-table>\n</div>","import { NgModule } from '@angular/core';\nimport {CommonModule} from '@angular/common';\n\nimport { OrganizationRoutingModule } from './organization-routing.module';\nimport { OrganizationComponent } from './organization.component';\nimport {PageHeaderModule} from '../../../components/page-header/page-header.module'\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzTableModule } from 'ng-zorro-antd/table';\nimport { NzDividerModule } from 'ng-zorro-antd/divider';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { NzGridModule } from 'ng-zorro-antd/grid';\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\nimport { NzInputModule } from 'ng-zorro-antd/input';\nimport { NzModalService } from 'ng-zorro-antd/modal';\nimport { NzModalModule } from 'ng-zorro-antd/modal';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    OrganizationRoutingModule,\n    PageHeaderModule,\n    NzButtonModule,\n    NzTableModule,\n    NzDividerModule,\n    NzFormModule,\n    NzGridModule,\n    ReactiveFormsModule,\n    NzInputModule,\n    FormsModule,\n    NzModalModule\n  ],\n  declarations: [OrganizationComponent],\n  exports: [OrganizationComponent],\n  providers: [NzModalService]\n})\nexport class OrganizationModule { }\n"]}