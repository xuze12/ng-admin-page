{"version":3,"sources":["webpack:///src/app/pages/roles/add-roles/add-roles-routing.module.ts","webpack:///src/app/pages/roles/add-roles/add-roles.component.ts","webpack:///src/app/pages/roles/add-roles/add-roles.component.html","webpack:///src/app/pages/roles/add-roles/add-roles.module.ts"],"names":["routes","path","component","AddRolesRoutingModule","forChild","imports","exports","AddRolesComponent","fb","router","listOfMapData","key","name","power","label","value","checked","allChecked","indeterminate","children","mapOfExpandedData","validateForm","group","rolesNmae","required","department","team","gender","forEach","item","convertTreeToList","e","preventDefault","reset","controls","markAsPristine","updateValueAndValidity","navigate","i","markAsDirty","console","log","array","data","$event","d","target","find","a","expand","collapse","root","stack","hashMap","push","level","length","node","pop","visitNode","parent","map","every","submitForm","groupChange","departmentChange","teamChange","resetForm","selector","templateUrl","styleUrls","AddRolesModule","declarations"],"mappings":"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","file":"pages-roles-add-roles-add-roles-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { AddRolesComponent } from './add-roles.component';\n\nconst routes: Routes = [\n  { path: '', component: AddRolesComponent },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AddRolesRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\nexport interface TreeNodeInterface {\n  key: number;\n  name: string;\n  power?: any;\n  allChecked?: boolean;\n  indeterminate?: boolean;\n  level?: number;\n  expand?: boolean;\n  children?: TreeNodeInterface[];\n  parent?: TreeNodeInterface;\n}\n\n@Component({\n  selector: 'app-add-roles',\n  templateUrl: './add-roles.component.html',\n  styleUrls: ['./add-roles.component.scss']\n})\nexport class AddRolesComponent implements OnInit {\n\n  validateForm: FormGroup;\n\n  listOfMapData: TreeNodeInterface[] = [\n    {\n      key: 1,\n      name: '转账',\n      power: [\n        { label: '新建', value: '新建', checked: true },\n        { label: '修改', value: '修改', checked: false },\n        { label: '删除', value: '删除', checked: false }\n      ],\n      allChecked: false,\n      indeterminate: true,\n      children: [\n        {\n          key: 11,\n          name: '转账给企业用户',\n          allChecked: false,\n          indeterminate: true,\n          power: [\n            { label: '新建', value: '新建', checked: true },\n            { label: '修改', value: '修改', checked: false },\n            { label: '删除', value: '删除', checked: false }\n          ],\n        },\n        {\n          key: 12,\n          name: '转账给个人账户',\n          allChecked: false,\n          indeterminate: true,\n          power: [\n            { label: '新建', value: '新建', checked: true },\n            { label: '修改', value: '修改', checked: false },\n            { label: '删除', value: '删除', checked: false }\n          ],\n        },\n      ]\n    },\n\n  ];\n  mapOfExpandedData: { [key: string]: TreeNodeInterface[] } = {};\n\n\n  constructor(private fb: FormBuilder, private router: Router) { }\n\n  ngOnInit(): void {\n    // 初始化表单\n    this.validateForm = this.fb.group({\n      rolesNmae: ['', [Validators.required]],\n      group: [null, [Validators.required]],\n      department: [null, [Validators.required]],\n      team: [null, [Validators.required]],\n      gender: [null, [Validators.required]],\n    });\n\n    // 初始化操作权限\n    this.listOfMapData.forEach(item => {\n      this.mapOfExpandedData[item.key] = this.convertTreeToList(item);\n    });\n  }\n\n  //取消\n  resetForm(e: MouseEvent): void {\n    e.preventDefault();\n    this.validateForm.reset();\n    for (const key in this.validateForm.controls) {\n      this.validateForm.controls[key].markAsPristine();\n      this.validateForm.controls[key].updateValueAndValidity();\n    }\n\n    this.router.navigate(['/admin/roles/list'])\n  }\n\n  // 表单提交\n  submitForm(): void {\n    for (const i in this.validateForm.controls) {\n      this.validateForm.controls[i].markAsDirty();\n      this.validateForm.controls[i].updateValueAndValidity();\n    }\n    console.log(this.validateForm,'========validateForm')\n    console.log(this.listOfMapData,'-------listOfMapData')\n    this.router.navigate(['/admin/roles/list'])\n  }\n\n\n  // 更换集团\n  groupChange(value: string): void {\n    // this.validateForm.get('note')!.setValue(value === 'male' ? 'Hi, man!' : 'Hi, lady!');\n  }\n\n  // 更换部门\n  departmentChange(value: string): void {\n    // this.validateForm.get('note')!.setValue(value === 'male' ? 'Hi, man!' : 'Hi, lady!');\n  }\n\n  // 更换班\n  teamChange(value: string): void {\n    // this.validateForm.get('note')!.setValue(value === 'male' ? 'Hi, man!' : 'Hi, lady!');\n  }\n\n  collapse(array: TreeNodeInterface[], data: TreeNodeInterface, $event: boolean): void {\n    console.log(array, '-------array')\n    console.log(data, '-------data')\n    console.log($event, '-------$event')\n    if (!$event) {\n      if (data.children) {\n        data.children.forEach(d => {\n          const target = array.find(a => a.key === d.key)!;\n          target.expand = false;\n          this.collapse(array, target, false);\n        });\n      } else {\n        return;\n      }\n    }\n  }\n\n  convertTreeToList(root: TreeNodeInterface): TreeNodeInterface[] {\n    const stack: TreeNodeInterface[] = [];\n    const array: TreeNodeInterface[] = [];\n    const hashMap = {};\n    stack.push({ ...root, level: 0, expand: false });\n\n    while (stack.length !== 0) {\n      const node = stack.pop()!;\n      this.visitNode(node, hashMap, array);\n      if (node.children) {\n        for (let i = node.children.length - 1; i >= 0; i--) {\n          stack.push({ ...node.children[i], level: node.level! + 1, expand: false, parent: node });\n        }\n      }\n    }\n\n    return array;\n  }\n\n  visitNode(node: TreeNodeInterface, hashMap: { [key: string]: boolean }, array: TreeNodeInterface[]): void {\n    if (!hashMap[node.key]) {\n      hashMap[node.key] = true;\n      array.push(node);\n    }\n  }\n\n  // 全选\n  updateAllChecked(array: TreeNodeInterface[], data: TreeNodeInterface, $event: boolean): void {\n    console.log(array, '-------array', data, '-------data', $event, '-------$event')\n    const target = array.find(a => a.key === data.key)!;\n    target.allChecked = $event;\n    target.indeterminate = false;\n    target.power = target.power.map(item => (\n      {\n        ...item,\n        checked: $event\n      }\n    ))\n\n  }\n\n  // 更新选中的\n  updateSingleChecked(array: TreeNodeInterface[], data: TreeNodeInterface, $event: boolean): void {\n\n    const target = array.find(a => a.key === data.key)!;\n\n    if (target.power.every(item => !item.checked)) {\n      target.allChecked = false;\n      target.indeterminate = false;\n    } else if (target.power.every(item => item.checked)) {\n      target.allChecked = true;\n      target.indeterminate = false;\n    } else {\n      target.indeterminate = true;\n    }\n  }\n\n\n}\n","<!--页头部-->\n<app-page-header></app-page-header>\n\n<!--表单-->\n<div class=\"add-roles-container\">\n  <form nz-form [formGroup]=\"validateForm\" (ngSubmit)=\"submitForm()\">\n\n    <!--角色输入框-->\n    <div nz-row>\n      <div nz-col [nzSpan]=\"18\">\n        <nz-form-item>\n          <nz-form-label nzRequired nzFor=\"rolesNmae\">角色名称</nz-form-label>\n          <nz-form-control [nzSm]=\"12\" [nzXs]=\"24\" nzErrorTip=\"请输入角色名称!\">\n            <input nz-input formControlName=\"rolesNmae\" placeholder=\"请输入角色名称\" id=\"rolesNmae\" />\n          </nz-form-control>\n        </nz-form-item>\n      </div>\n    </div>\n\n    <!--所属机构选项框-->\n    <div nz-row>\n      <div nz-col [nzSpan]=\"18\">\n        <nz-form-item>\n          <nz-form-label nzFor=\"gender\" nzRequired>所属机构</nz-form-label>\n          <nz-form-control [nzSpan]=\"7\" nzErrorTip=\"请选所属集团!\" class=\"add-roles-form-control\">\n            <nz-select id=\"gender\" formControlName=\"group\" nzPlaceHolder=\"请选所属集团\" (ngModelChange)=\"groupChange($event)\">\n              <nz-option nzValue=\"恒大集团\" nzLabel=\"恒大集团\"></nz-option>\n              <nz-option nzValue=\"阿里集团\" nzLabel=\"阿里集团\"></nz-option>\n            </nz-select>\n          </nz-form-control>\n          <nz-form-control [nzSpan]=\"7\" nzErrorTip=\"请选所属部门!\" class=\"add-roles-form-control\">\n            <nz-select id=\"gender\" formControlName=\"department\" nzPlaceHolder=\"请选所属部门\"\n              (ngModelChange)=\"departmentChange($event)\">\n              <nz-option nzValue=\"后勤部\" nzLabel=\"后勤部\"></nz-option>\n              <nz-option nzValue=\"技术部\" nzLabel=\"技术部\"></nz-option>\n            </nz-select>\n          </nz-form-control>\n          <nz-form-control [nzSpan]=\"7\" nzErrorTip=\"请选所属班!\" class=\"add-roles-form-control\">\n            <nz-select id=\"gender\" formControlName=\"team\" nzPlaceHolder=\"请选所属班\" (ngModelChange)=\"teamChange($event)\">\n              <nz-option nzValue=\"炊事班\" nzLabel=\"炊事班\"></nz-option>\n              <nz-option nzValue=\"娃娃班\" nzLabel=\"娃娃班\"></nz-option>\n            </nz-select>\n          </nz-form-control>\n        </nz-form-item>\n      </div>\n    </div>\n\n    <!--操作权限-->\n    <nz-form-label class=\"add-roles-form-label\" nzRequired nzFor=\"rolesNmae\">操作权限</nz-form-label>\n  </form>\n\n  <nz-table #expandTable [nzShowPagination]=\"false\" [nzData]=\"listOfMapData\" nzTableLayout=\"fixed\">\n    <thead>\n      <tr>\n        <th>页面</th>\n        <th>权限</th>\n      </tr>\n    </thead>\n    <tbody>\n      <ng-container *ngFor=\"let data of expandTable.data\">\n        <ng-container *ngFor=\"let item of mapOfExpandedData[data.key]\">\n          <tr *ngIf=\"(item.parent && item.parent.expand) || !item.parent\">\n            <td [nzIndentSize]=\"item.level! * 20\" [nzShowExpand]=\"!!item.children\" [(nzExpand)]=\"item.expand\"\n              (nzExpandChange)=\"collapse(mapOfExpandedData[data.key], item, $event)\">\n\n              <label nz-checkbox [(ngModel)]=\"item.allChecked\"\n                (ngModelChange)=\"updateAllChecked(mapOfExpandedData[data.key], item, $event)\"\n                [nzIndeterminate]=\"item.indeterminate\">\n                {{ item.name }}\n              </label>\n            </td>\n            <td>\n              <nz-checkbox-group [(ngModel)]=\"item.power\"\n                (ngModelChange)=\"updateSingleChecked(mapOfExpandedData[data.key], item, $event)\">\n              </nz-checkbox-group>\n            </td>\n          </tr>\n        </ng-container>\n      </ng-container>\n    </tbody>\n  </nz-table>\n    <!--提交取消按钮-->\n    <div class=\"add-roles-button-group\">\n      <button nz-button [nzType]=\"'primary'\" (click)=\"submitForm()\">新建</button>\n      <button nz-button class=\"add-roles-button-reset\" (click)=\"resetForm($event)\">取消</button>\n    </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\n\nimport { AddRolesRoutingModule } from './add-roles-routing.module';\n\nimport { AddRolesComponent } from './add-roles.component';\n\nimport {PageHeaderModule} from '../../../components/page-header/page-header.module'\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzTableModule } from 'ng-zorro-antd/table';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { NzInputModule } from 'ng-zorro-antd/input';\nimport { NzSelectModule } from 'ng-zorro-antd/select';\nimport { NzCheckboxModule } from 'ng-zorro-antd/checkbox';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n    AddRolesRoutingModule,\n    PageHeaderModule,\n    NzButtonModule,\n    NzTableModule,\n    NzFormModule,\n    NzInputModule,\n    NzSelectModule,\n    NzCheckboxModule,\n  ],\n  declarations: [AddRolesComponent],\n  exports: [AddRolesComponent]\n})\nexport class AddRolesModule { }\n"]}