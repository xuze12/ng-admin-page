{"version":3,"sources":["./src/app/pages/roles/add-roles/add-roles-routing.module.ts","./src/app/pages/roles/add-roles/add-roles.component.ts","./src/app/pages/roles/add-roles/add-roles.component.html","./src/app/pages/roles/add-roles/add-roles.module.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACc;AACG;;;AAE1D,MAAM,MAAM,GAAW;IACrB,EAAE,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,sEAAiB,EAAE;CAC3C,CAAC;AAMK,MAAM,qBAAqB;;oGAArB,qBAAqB;oKAArB,qBAAqB,kBAHvB,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QAC9B,4DAAY;mIAEX,qBAAqB,uFAFtB,4DAAY;6FAEX,qBAAqB;cAJjC,sDAAQ;eAAC;gBACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;gBACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;aACxB;;;;;;;;;;;;;;ACXD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AAEkB;;;;;;;;;;;;;;;;;IC2D1D,qEACE;IAAA,yEAGE;IAHqE,uXAA0B;IAG/F,4EAGE;IAHiB,4XAA6B;IAG9C,uDACF;IAAA,4DAAQ;IACV,4DAAK;IACL,qEACE;IAAA,wFAEoB;IAFD,mYAAwB;IAE3C,4DAAoB;IACtB,4DAAK;IACP,4DAAK;;;IAdC,0DAAiC;IAAjC,4FAAiC;IAGhB,0DAA6B;IAA7B,uFAA6B;IAG9C,0DACF;IADE,wFACF;IAGmB,0DAAwB;IAAxB,kFAAwB;;;IAZjD,wEACE;IAAA,2IACE;IAeJ,qEAAe;;;IAhBT,0DAA2D;IAA3D,4HAA2D;;;IAFnE,wEACE;IAAA,gJACE;IAiBJ,qEAAe;;;;IAlBC,0DAAgD;IAAhD,0GAAgD;;ADvC/D,MAAM,iBAAiB;IA6C5B,YAAoB,EAAe,EAAU,MAAc;QAAvC,OAAE,GAAF,EAAE,CAAa;QAAU,WAAM,GAAN,MAAM,CAAQ;QAzC3D,kBAAa,GAAwB;YACnC;gBACE,GAAG,EAAE,CAAC;gBACN,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE;oBACL,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE;oBAC3C,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE;oBAC5C,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE;iBAC7C;gBACD,UAAU,EAAE,KAAK;gBACjB,aAAa,EAAE,IAAI;gBACnB,QAAQ,EAAE;oBACR;wBACE,GAAG,EAAE,EAAE;wBACP,IAAI,EAAE,SAAS;wBACf,UAAU,EAAE,KAAK;wBACjB,aAAa,EAAE,IAAI;wBACnB,KAAK,EAAE;4BACL,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE;4BAC3C,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE;4BAC5C,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE;yBAC7C;qBACF;oBACD;wBACE,GAAG,EAAE,EAAE;wBACP,IAAI,EAAE,SAAS;wBACf,UAAU,EAAE,KAAK;wBACjB,aAAa,EAAE,IAAI;wBACnB,KAAK,EAAE;4BACL,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE;4BAC3C,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE;4BAC5C,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE;yBAC7C;qBACF;iBACF;aACF;SAEF,CAAC;QACF,sBAAiB,GAA2C,EAAE,CAAC;IAGA,CAAC;IAEhE,QAAQ;QACN,QAAQ;QACR,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;YAChC,SAAS,EAAE,CAAC,EAAE,EAAE,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC;YACtC,KAAK,EAAE,CAAC,IAAI,EAAE,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC;YACpC,UAAU,EAAE,CAAC,IAAI,EAAE,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC;YACzC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC;YACnC,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC;SACtC,CAAC,CAAC;QAEH,UAAU;QACV,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YAChC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAClE,CAAC,CAAC,CAAC;IACL,CAAC;IAED,IAAI;IACJ,SAAS,CAAC,CAAa;QACrB,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;QAC1B,KAAK,MAAM,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE;YAC5C,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,CAAC;YACjD,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,sBAAsB,EAAE,CAAC;SAC1D;QAED,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,mBAAmB,CAAC,CAAC;IAC7C,CAAC;IAED,OAAO;IACP,UAAU;QACR,KAAK,MAAM,CAAC,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE;YAC1C,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;YAC5C,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,sBAAsB,EAAE,CAAC;SACxD;QACD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,EAAC,sBAAsB,CAAC;QACrD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,EAAC,sBAAsB,CAAC;QACtD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,mBAAmB,CAAC,CAAC;IAC7C,CAAC;IAGD,OAAO;IACP,WAAW,CAAC,KAAa;QACvB,wFAAwF;IAC1F,CAAC;IAED,OAAO;IACP,gBAAgB,CAAC,KAAa;QAC5B,wFAAwF;IAC1F,CAAC;IAED,MAAM;IACN,UAAU,CAAC,KAAa;QACtB,wFAAwF;IAC1F,CAAC;IAED,QAAQ,CAAC,KAA0B,EAAE,IAAuB,EAAE,MAAe;QAC3E,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,cAAc,CAAC;QAClC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,aAAa,CAAC;QAChC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,eAAe,CAAC;QACpC,IAAI,CAAC,MAAM,EAAE;YACX,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;oBACxB,MAAM,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,CAAE,CAAC;oBACjD,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC;oBACtB,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;gBACtC,CAAC,CAAC,CAAC;aACJ;iBAAM;gBACL,OAAO;aACR;SACF;IACH,CAAC;IAED,iBAAiB,CAAC,IAAuB;QACvC,MAAM,KAAK,GAAwB,EAAE,CAAC;QACtC,MAAM,KAAK,GAAwB,EAAE,CAAC;QACtC,MAAM,OAAO,GAAG,EAAE,CAAC;QACnB,KAAK,CAAC,IAAI,iCAAM,IAAI,KAAE,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,KAAK,IAAG,CAAC;QAEjD,OAAO,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;YACzB,MAAM,IAAI,GAAG,KAAK,CAAC,GAAG,EAAG,CAAC;YAC1B,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;YACrC,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;oBAClD,KAAK,CAAC,IAAI,iCAAM,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAE,KAAK,EAAE,IAAI,CAAC,KAAM,GAAG,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,IAAG,CAAC;iBAC1F;aACF;SACF;QAED,OAAO,KAAK,CAAC;IACf,CAAC;IAED,SAAS,CAAC,IAAuB,EAAE,OAAmC,EAAE,KAA0B;QAChG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YACtB,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;YACzB,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAClB;IACH,CAAC;IAED,KAAK;IACL,gBAAgB,CAAC,KAA0B,EAAE,IAAuB,EAAE,MAAe;QACnF,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,cAAc,EAAE,IAAI,EAAE,aAAa,EAAE,MAAM,EAAE,eAAe,CAAC;QAChF,MAAM,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,GAAG,CAAE,CAAC;QACpD,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC;QAC3B,MAAM,CAAC,aAAa,GAAG,KAAK,CAAC;QAC7B,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,iCAEjC,IAAI,KACP,OAAO,EAAE,MAAM,IAElB,CAAC;IAEJ,CAAC;IAED,QAAQ;IACR,mBAAmB,CAAC,KAA0B,EAAE,IAAuB,EAAE,MAAe;QAEtF,MAAM,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,GAAG,CAAE,CAAC;QAEpD,IAAI,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;YAC7C,MAAM,CAAC,UAAU,GAAG,KAAK,CAAC;YAC1B,MAAM,CAAC,aAAa,GAAG,KAAK,CAAC;SAC9B;aAAM,IAAI,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;YACnD,MAAM,CAAC,UAAU,GAAG,IAAI,CAAC;YACzB,MAAM,CAAC,aAAa,GAAG,KAAK,CAAC;SAC9B;aAAM;YACL,MAAM,CAAC,aAAa,GAAG,IAAI,CAAC;SAC7B;IACH,CAAC;;kFA9KU,iBAAiB;iGAAjB,iBAAiB;QCpB9B,6EAAmC;QAGnC,yEACE;QAAA,0EAEE;QAFuC,6IAAY,gBAAY,IAAC;QAGhE,yEACE;QAAA,yEACE;QAAA,+EACE;QAAA,mFAA4C;QAAA,mFAAI;QAAA,4DAAgB;QAChE,qFACE;QAAA,sEACF;QAAA,4DAAkB;QACpB,4DAAe;QACjB,4DAAM;QACR,4DAAM;QAGN,0EACE;QAAA,0EACE;QAAA,gFACE;QAAA,oFAAyC;QAAA,oFAAI;QAAA,4DAAgB;QAC7D,sFACE;QAAA,gFACE;QADoE,mKAAiB,uBAAmB,IAAC;QACzG,4EAAqD;QACrD,4EAAqD;QACvD,4DAAY;QACd,4DAAkB;QAClB,uFACE;QAAA,iFAEE;QADA,mKAAiB,4BAAwB,IAAC;QAC1C,4EAAmD;QACnD,4EAAmD;QACrD,4DAAY;QACd,4DAAkB;QAClB,uFACE;QAAA,iFACE;QADkE,mKAAiB,sBAAkB,IAAC;QACtG,4EAAmD;QACnD,4EAAmD;QACrD,4DAAY;QACd,4DAAkB;QACpB,4DAAe;QACjB,4DAAM;QACR,4DAAM;QAGN,qFAAyE;QAAA,oFAAI;QAAA,4DAAgB;QAC/F,4DAAO;QAEP,oFACE;QAAA,yEACE;QAAA,sEACE;QAAA,sEAAI;QAAA,wEAAE;QAAA,4DAAK;QACX,sEAAI;QAAA,wEAAE;QAAA,4DAAK;QACb,4DAAK;QACP,4DAAQ;QACR,yEACE;QAAA,kIACE;QAmBJ,4DAAQ;QACV,4DAAW;QAET,2EACE;QAAA,8EAA8D;QAAvB,0IAAS,gBAAY,IAAC;QAAC,wEAAE;QAAA,4DAAS;QACzE,8EAA6E;QAA5B,gJAAS,qBAAiB,IAAC;QAAC,wEAAE;QAAA,4DAAS;QAC1F,4DAAM;QACV,4DAAM;;;QAjFU,0DAA0B;QAA1B,uFAA0B;QAIxB,0DAAa;QAAb,sEAAa;QAGJ,0DAAW;QAAX,oEAAW;QASpB,0DAAa;QAAb,sEAAa;QAGJ,0DAAY;QAAZ,qEAAY;QAMZ,0DAAY;QAAZ,qEAAY;QAOZ,0DAAY;QAAZ,qEAAY;QAcd,0DAA0B;QAA1B,mFAA0B;QAQ/B,0DAAqC;QAArC,6EAAqC;QAwBjC,0DAAoB;QAApB,6EAAoB;;6FD9D/B,iBAAiB;cAL7B,uDAAS;eAAC;gBACT,QAAQ,EAAE,eAAe;gBACzB,WAAW,EAAE,4BAA4B;gBACzC,SAAS,EAAE,CAAC,4BAA4B,CAAC;aAC1C;;;;;;;;;;;;;;AEpBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACI;AACoB;AAEE;AAET;AAEyB;AAC7B;AACF;AACF;AACE;AACE;AACI;;AAoBnD,MAAM,cAAc;;6FAAd,cAAc;sJAAd,cAAc,kBAhBhB;YACP,4DAAY;YACZ,kEAAmB;YACnB,0DAAW;YACX,+EAAqB;YACrB,2FAAgB;YAChB,mEAAc;YACd,iEAAa;YACb,+DAAY;YACZ,iEAAa;YACb,oEAAc;YACd,wEAAgB;SACjB;mIAIU,cAAc,mBAHV,sEAAiB,aAZ9B,4DAAY;QACZ,kEAAmB;QACnB,0DAAW;QACX,+EAAqB;QACrB,2FAAgB;QAChB,mEAAc;QACd,iEAAa;QACb,+DAAY;QACZ,iEAAa;QACb,oEAAc;QACd,wEAAgB,aAGR,sEAAiB;6FAEhB,cAAc;cAjB1B,sDAAQ;eAAC;gBACR,OAAO,EAAE;oBACP,4DAAY;oBACZ,kEAAmB;oBACnB,0DAAW;oBACX,+EAAqB;oBACrB,2FAAgB;oBAChB,mEAAc;oBACd,iEAAa;oBACb,+DAAY;oBACZ,iEAAa;oBACb,oEAAc;oBACd,wEAAgB;iBACjB;gBACD,YAAY,EAAE,CAAC,sEAAiB,CAAC;gBACjC,OAAO,EAAE,CAAC,sEAAiB,CAAC;aAC7B","file":"pages-roles-add-roles-add-roles-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { AddRolesComponent } from './add-roles.component';\n\nconst routes: Routes = [\n  { path: '', component: AddRolesComponent },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AddRolesRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\nexport interface TreeNodeInterface {\n  key: number;\n  name: string;\n  power?: any;\n  allChecked?: boolean;\n  indeterminate?: boolean;\n  level?: number;\n  expand?: boolean;\n  children?: TreeNodeInterface[];\n  parent?: TreeNodeInterface;\n}\n\n@Component({\n  selector: 'app-add-roles',\n  templateUrl: './add-roles.component.html',\n  styleUrls: ['./add-roles.component.scss']\n})\nexport class AddRolesComponent implements OnInit {\n\n  validateForm: FormGroup;\n\n  listOfMapData: TreeNodeInterface[] = [\n    {\n      key: 1,\n      name: '转账',\n      power: [\n        { label: '新建', value: '新建', checked: true },\n        { label: '修改', value: '修改', checked: false },\n        { label: '删除', value: '删除', checked: false }\n      ],\n      allChecked: false,\n      indeterminate: true,\n      children: [\n        {\n          key: 11,\n          name: '转账给企业用户',\n          allChecked: false,\n          indeterminate: true,\n          power: [\n            { label: '新建', value: '新建', checked: true },\n            { label: '修改', value: '修改', checked: false },\n            { label: '删除', value: '删除', checked: false }\n          ],\n        },\n        {\n          key: 12,\n          name: '转账给个人账户',\n          allChecked: false,\n          indeterminate: true,\n          power: [\n            { label: '新建', value: '新建', checked: true },\n            { label: '修改', value: '修改', checked: false },\n            { label: '删除', value: '删除', checked: false }\n          ],\n        },\n      ]\n    },\n\n  ];\n  mapOfExpandedData: { [key: string]: TreeNodeInterface[] } = {};\n\n\n  constructor(private fb: FormBuilder, private router: Router) { }\n\n  ngOnInit(): void {\n    // 初始化表单\n    this.validateForm = this.fb.group({\n      rolesNmae: ['', [Validators.required]],\n      group: [null, [Validators.required]],\n      department: [null, [Validators.required]],\n      team: [null, [Validators.required]],\n      gender: [null, [Validators.required]],\n    });\n\n    // 初始化操作权限\n    this.listOfMapData.forEach(item => {\n      this.mapOfExpandedData[item.key] = this.convertTreeToList(item);\n    });\n  }\n\n  //取消\n  resetForm(e: MouseEvent): void {\n    e.preventDefault();\n    this.validateForm.reset();\n    for (const key in this.validateForm.controls) {\n      this.validateForm.controls[key].markAsPristine();\n      this.validateForm.controls[key].updateValueAndValidity();\n    }\n\n    this.router.navigate(['/admin/roles/list'])\n  }\n\n  // 表单提交\n  submitForm(): void {\n    for (const i in this.validateForm.controls) {\n      this.validateForm.controls[i].markAsDirty();\n      this.validateForm.controls[i].updateValueAndValidity();\n    }\n    console.log(this.validateForm,'========validateForm')\n    console.log(this.listOfMapData,'-------listOfMapData')\n    this.router.navigate(['/admin/roles/list'])\n  }\n\n\n  // 更换集团\n  groupChange(value: string): void {\n    // this.validateForm.get('note')!.setValue(value === 'male' ? 'Hi, man!' : 'Hi, lady!');\n  }\n\n  // 更换部门\n  departmentChange(value: string): void {\n    // this.validateForm.get('note')!.setValue(value === 'male' ? 'Hi, man!' : 'Hi, lady!');\n  }\n\n  // 更换班\n  teamChange(value: string): void {\n    // this.validateForm.get('note')!.setValue(value === 'male' ? 'Hi, man!' : 'Hi, lady!');\n  }\n\n  collapse(array: TreeNodeInterface[], data: TreeNodeInterface, $event: boolean): void {\n    console.log(array, '-------array')\n    console.log(data, '-------data')\n    console.log($event, '-------$event')\n    if (!$event) {\n      if (data.children) {\n        data.children.forEach(d => {\n          const target = array.find(a => a.key === d.key)!;\n          target.expand = false;\n          this.collapse(array, target, false);\n        });\n      } else {\n        return;\n      }\n    }\n  }\n\n  convertTreeToList(root: TreeNodeInterface): TreeNodeInterface[] {\n    const stack: TreeNodeInterface[] = [];\n    const array: TreeNodeInterface[] = [];\n    const hashMap = {};\n    stack.push({ ...root, level: 0, expand: false });\n\n    while (stack.length !== 0) {\n      const node = stack.pop()!;\n      this.visitNode(node, hashMap, array);\n      if (node.children) {\n        for (let i = node.children.length - 1; i >= 0; i--) {\n          stack.push({ ...node.children[i], level: node.level! + 1, expand: false, parent: node });\n        }\n      }\n    }\n\n    return array;\n  }\n\n  visitNode(node: TreeNodeInterface, hashMap: { [key: string]: boolean }, array: TreeNodeInterface[]): void {\n    if (!hashMap[node.key]) {\n      hashMap[node.key] = true;\n      array.push(node);\n    }\n  }\n\n  // 全选\n  updateAllChecked(array: TreeNodeInterface[], data: TreeNodeInterface, $event: boolean): void {\n    console.log(array, '-------array', data, '-------data', $event, '-------$event')\n    const target = array.find(a => a.key === data.key)!;\n    target.allChecked = $event;\n    target.indeterminate = false;\n    target.power = target.power.map(item => (\n      {\n        ...item,\n        checked: $event\n      }\n    ))\n\n  }\n\n  // 更新选中的\n  updateSingleChecked(array: TreeNodeInterface[], data: TreeNodeInterface, $event: boolean): void {\n\n    const target = array.find(a => a.key === data.key)!;\n\n    if (target.power.every(item => !item.checked)) {\n      target.allChecked = false;\n      target.indeterminate = false;\n    } else if (target.power.every(item => item.checked)) {\n      target.allChecked = true;\n      target.indeterminate = false;\n    } else {\n      target.indeterminate = true;\n    }\n  }\n\n\n}\n","<!--页头部-->\n<app-page-header></app-page-header>\n\n<!--表单-->\n<div class=\"add-roles-container\">\n  <form nz-form [formGroup]=\"validateForm\" (ngSubmit)=\"submitForm()\">\n\n    <!--角色输入框-->\n    <div nz-row>\n      <div nz-col [nzSpan]=\"18\">\n        <nz-form-item>\n          <nz-form-label nzRequired nzFor=\"rolesNmae\">角色名称</nz-form-label>\n          <nz-form-control [nzSm]=\"12\" [nzXs]=\"24\" nzErrorTip=\"请输入角色名称!\">\n            <input nz-input formControlName=\"rolesNmae\" placeholder=\"请输入角色名称\" id=\"rolesNmae\" />\n          </nz-form-control>\n        </nz-form-item>\n      </div>\n    </div>\n\n    <!--所属机构选项框-->\n    <div nz-row>\n      <div nz-col [nzSpan]=\"18\">\n        <nz-form-item>\n          <nz-form-label nzFor=\"gender\" nzRequired>所属机构</nz-form-label>\n          <nz-form-control [nzSpan]=\"7\" nzErrorTip=\"请选所属集团!\" class=\"add-roles-form-control\">\n            <nz-select id=\"gender\" formControlName=\"group\" nzPlaceHolder=\"请选所属集团\" (ngModelChange)=\"groupChange($event)\">\n              <nz-option nzValue=\"恒大集团\" nzLabel=\"恒大集团\"></nz-option>\n              <nz-option nzValue=\"阿里集团\" nzLabel=\"阿里集团\"></nz-option>\n            </nz-select>\n          </nz-form-control>\n          <nz-form-control [nzSpan]=\"7\" nzErrorTip=\"请选所属部门!\" class=\"add-roles-form-control\">\n            <nz-select id=\"gender\" formControlName=\"department\" nzPlaceHolder=\"请选所属部门\"\n              (ngModelChange)=\"departmentChange($event)\">\n              <nz-option nzValue=\"后勤部\" nzLabel=\"后勤部\"></nz-option>\n              <nz-option nzValue=\"技术部\" nzLabel=\"技术部\"></nz-option>\n            </nz-select>\n          </nz-form-control>\n          <nz-form-control [nzSpan]=\"7\" nzErrorTip=\"请选所属班!\" class=\"add-roles-form-control\">\n            <nz-select id=\"gender\" formControlName=\"team\" nzPlaceHolder=\"请选所属班\" (ngModelChange)=\"teamChange($event)\">\n              <nz-option nzValue=\"炊事班\" nzLabel=\"炊事班\"></nz-option>\n              <nz-option nzValue=\"娃娃班\" nzLabel=\"娃娃班\"></nz-option>\n            </nz-select>\n          </nz-form-control>\n        </nz-form-item>\n      </div>\n    </div>\n\n    <!--操作权限-->\n    <nz-form-label class=\"add-roles-form-label\" nzRequired nzFor=\"rolesNmae\">操作权限</nz-form-label>\n  </form>\n\n  <nz-table #expandTable [nzShowPagination]=\"false\" [nzData]=\"listOfMapData\" nzTableLayout=\"fixed\">\n    <thead>\n      <tr>\n        <th>页面</th>\n        <th>权限</th>\n      </tr>\n    </thead>\n    <tbody>\n      <ng-container *ngFor=\"let data of expandTable.data\">\n        <ng-container *ngFor=\"let item of mapOfExpandedData[data.key]\">\n          <tr *ngIf=\"(item.parent && item.parent.expand) || !item.parent\">\n            <td [nzIndentSize]=\"item.level! * 20\" [nzShowExpand]=\"!!item.children\" [(nzExpand)]=\"item.expand\"\n              (nzExpandChange)=\"collapse(mapOfExpandedData[data.key], item, $event)\">\n\n              <label nz-checkbox [(ngModel)]=\"item.allChecked\"\n                (ngModelChange)=\"updateAllChecked(mapOfExpandedData[data.key], item, $event)\"\n                [nzIndeterminate]=\"item.indeterminate\">\n                {{ item.name }}\n              </label>\n            </td>\n            <td>\n              <nz-checkbox-group [(ngModel)]=\"item.power\"\n                (ngModelChange)=\"updateSingleChecked(mapOfExpandedData[data.key], item, $event)\">\n              </nz-checkbox-group>\n            </td>\n          </tr>\n        </ng-container>\n      </ng-container>\n    </tbody>\n  </nz-table>\n    <!--提交取消按钮-->\n    <div class=\"add-roles-button-group\">\n      <button nz-button [nzType]=\"'primary'\" (click)=\"submitForm()\">新建</button>\n      <button nz-button class=\"add-roles-button-reset\" (click)=\"resetForm($event)\">取消</button>\n    </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\n\nimport { AddRolesRoutingModule } from './add-roles-routing.module';\n\nimport { AddRolesComponent } from './add-roles.component';\n\nimport {PageHeaderModule} from '../../../components/page-header/page-header.module'\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzTableModule } from 'ng-zorro-antd/table';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { NzInputModule } from 'ng-zorro-antd/input';\nimport { NzSelectModule } from 'ng-zorro-antd/select';\nimport { NzCheckboxModule } from 'ng-zorro-antd/checkbox';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n    AddRolesRoutingModule,\n    PageHeaderModule,\n    NzButtonModule,\n    NzTableModule,\n    NzFormModule,\n    NzInputModule,\n    NzSelectModule,\n    NzCheckboxModule,\n  ],\n  declarations: [AddRolesComponent],\n  exports: [AddRolesComponent]\n})\nexport class AddRolesModule { }\n"],"sourceRoot":"webpack:///"}